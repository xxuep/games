<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Newtab</title>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
<style>
    /* Reset */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Lato',sans-serif; }
    :root{
        --inputbg: #6B0000;
        --inputborder: #8B0000;
        --uibg: #8B0000;
        --textcolor: #ffffff;
        --bg: #2c2c2c;
        --shadow: 0px 0px 4px #8B0000;
        --header-height: 100px; /* default header height used for spacing */
    }

    ::selection { background-color: var(--uibg); color: var(--textcolor); }

    html,body { height:100%; background:var(--bg); color:var(--textcolor); }

    body {
        display:flex;
        flex-direction:column;
        min-height:100vh;
        overflow:hidden; /* prevent page scrolling so iframe fits nicely */
    }

    /* ---------- HEADER ---------- */
    .header {
        background-color: var(--uibg);
        padding: 20px;
        box-shadow: 0 5px 10px var(--uibg);
        border-radius: 0 0 20px 20px;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        width:100%;
        z-index: 1000;
        display:block;
        transition: transform 0.35s ease, opacity 0.35s ease;
    }

    .container { max-width:1400px; margin: 0 auto; padding: 0 12px; width:100%; }

    .branding { font-size: 24px; font-weight:700; text-align:center; color:var(--textcolor); margin-bottom:12px; text-shadow:var(--shadow); }

    .url-bar { display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap; }

    .input-wrapper { flex:1; min-width:300px; position:relative; max-width:900px; }

    input#urlInput{ width:100%; padding:14px 50px 14px 16px; background:var(--inputbg); border:2px solid var(--inputborder); border-radius:10px; font-size:15px; color:var(--textcolor); text-align:center; transition:all .25s; }
    input#urlInput:focus { outline:none; opacity:.9; }

    .clear-btn{ position:absolute; right:12px; top:50%; transform:translateY(-50%); background:none; border:none; color:var(--textcolor); cursor:pointer; padding:4px 8px; font-size:18px; display:none; opacity:.6; }
    .clear-btn:hover{ opacity:1; }

    button#goBtn{ padding:14px 28px; background-color:var(--uibg); border:2px solid var(--inputborder); border-radius:10px; color:var(--textcolor); font-weight:700; cursor:pointer; font-size:15px; transition:all .25s; text-shadow:var(--shadow); }
    button#goBtn:hover{ transform:scale(1.03); filter:brightness(.9); }
    button#goBtn:disabled{ opacity:.5; cursor:not-allowed; transform:none; }

    .proxy-select{ padding:14px 16px; background-color:var(--inputbg); border:2px solid var(--inputborder); border-radius:10px; color:var(--textcolor); font-size:14px; cursor:pointer; text-align:center; }

    /* ---------- CONTENT ---------- */
    .content { flex:1; margin: calc(var(--header-height,100px)) 20px 20px 20px; border-radius:20px; overflow:hidden; display:flex; flex-direction:column; background: #2c2c2c; box-shadow: 0px 0px 5px 5px var(--uibg); border:2px solid var(--inputborder); transition: margin .35s ease, border-radius .35s ease; min-height: 200px; position:relative; z-index: 1; }

    .content.fullscreen { margin:0 !important; border-radius:0 !important; }

    .info { padding:25px; background: #2c2c2c; color:var(--textcolor); border-radius:10px; margin:20px; line-height:1.8; border:2px solid var(--inputborder); text-align:center; }
    .info strong{ display:block; margin-bottom:8px; font-size:18px; text-shadow:var(--shadow); }
    .info ul{ list-style:none; margin-top:10px; padding:0; }
    .info li{ margin:5px 0; font-size:16px; }

    .loading{ display:none; text-align:center; padding:60px; color:var(--textcolor); font-size:18px; }
    .spinner{ border:3px solid var(--inputborder); border-top:3px solid var(--textcolor); border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; margin:0 auto 20px; }
    @keyframes spin{ 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }

    .error{ display:none; padding:20px; background:#440000; color:#ffcccc; border-radius:10px; margin:20px; border:2px solid var(--inputborder); }

    /* IFRAME */
    #proxyFrame{ flex:1; width:100%; height:100%; border:none; display:none; background:var(--bg); }
    .content.fullscreen #proxyFrame{ display:block; z-index: 10; position: absolute; inset: 0; width:100%; height:100%; }

    /* status bar */
    .status-bar{ padding:10px 20px; background-color:var(--uibg); border-top:2px solid var(--inputborder); display:flex; justify-content:space-between; align-items:center; font-size:14px; color:var(--textcolor); text-shadow:var(--shadow); position:fixed; left:0; right:0; bottom:0; z-index:1000; }
    .status-indicator{ display:flex; align-items:center; gap:8px; }
    .status-dot{ width:8px; height:8px; border-radius:50%; background:#ff4444; box-shadow:0 0 8px #ff4444; animation:pulse 2s infinite; }
    @keyframes pulse{ 0%,100%{opacity:1} 50%{opacity:.5} }

    /* HIDE UI */
    .hidden-ui { opacity:0; transform:translateY(-25px); pointer-events:none; transition:opacity .35s, transform .35s; }
    .hidden-status { opacity:0; transform:translateY(25px); pointer-events:none; transition:opacity .35s, transform .35s; }

    /* responsive tweaks */
    @media only screen and (max-width: 900px){
        :root{ --header-height: 160px; }
        .container{ padding:0 10px; }
        input#urlInput{ padding:12px 44px 12px 12px; font-size:14px; }
        .proxy-select, button#goBtn{ padding:12px 14px; font-size:14px; }
    }
    @media only screen and (max-width: 480px){
        :root{ --header-height: 180px; }
        .branding{ font-size:20px; }
        .info{ padding:16px; margin:12px; }
        .content{ margin: calc(var(--header-height,180px)) 10px 70px 10px; }
    }
</style>
</head>
<body>
<div class="header" id="headerEl">
    <div class="container">
        <div class="branding">Jon's Cracked Proxy</div>
        <div class="url-bar">
            <div class="input-wrapper">
                <input id="urlInput" type="text" placeholder="Enter any website URL..." autocomplete="off" />
                <button class="clear-btn" id="clearBtn">‚úï</button>
            </div>
            <select id="proxySelect" class="proxy-select">
                <option value="corsproxy">xXJ0NXxProxy (Working)</option>
                <option value="allorigins">AllOrigins</option>
                <option value="direct">Direct Load</option>
            </select>
            <button id="goBtn">Load Site</button>
        </div>
    </div>
</div>

<div class="content" id="contentBox">
    <div class="info" id="info">
        <strong>üåê GX-Gamescrack's Web Proxy</strong>
        <ul>
            <li>Enter any URL</li> 
            <li>DO NOT TYPE HTTPS://</li>
            <li>Single Tested HTML File</li>
        </ul>
    </div>

    <div class="loading" id="loading">
        <div class="spinner"></div>
        Loading website...
    </div>

    <div class="error" id="error"></div>

    <iframe id="proxyFrame" sandbox="allow-forms allow-scripts allow-same-origin allow-modals"></iframe>
</div>

<div class="status-bar" id="statusBar">
    <div class="status-indicator">
        <div class="status-dot"></div>
        <span id="statusIndicator">Cracked</span>
    </div>
    <div id="statusText">Warning You Can Get In A Lot Of Trouble For This!</div>
</div>

<script>
const urlInput = document.getElementById('urlInput');
const clearBtn = document.getElementById('clearBtn');
const goBtn = document.getElementById('goBtn');
const proxySelect = document.getElementById('proxySelect');
const frame = document.getElementById('proxyFrame');
const loading = document.getElementById('loading');
const error = document.getElementById('error');
const info = document.getElementById('info');
const statusText = document.getElementById('statusText');
const statusIndicator = document.getElementById('statusIndicator');
const headerEl = document.getElementById('headerEl');
const statusBar = document.getElementById('statusBar');
const contentBox = document.getElementById('contentBox');

// clear button
urlInput.addEventListener('input', () => {
    clearBtn.style.display = urlInput.value ? 'block' : 'none';
});
clearBtn.addEventListener('click', () => {
    urlInput.value = '';
    clearBtn.style.display = 'none';
    urlInput.focus();
});

function showError(msg){
    error.textContent = '‚ö†Ô∏è ' + msg;
    error.style.display = 'block';
    loading.style.display = 'none';
    frame.style.display = 'none';
    statusIndicator.textContent = 'Error';
    statusText.textContent = 'Error';
    goBtn.disabled = false;
}

function getProxyUrl(url, proxyType){
    if(proxyType === 'corsproxy') return `https://corsproxy.io/?${encodeURIComponent(url)}`;
    if(proxyType === 'allorigins') return `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`;
    return url;
}

function finishLoad(originalUrl){
    loading.style.display = 'none';
    error.style.display = 'none';
    frame.style.display = 'block';
    goBtn.disabled = false;
    statusIndicator.textContent = 'Connected';
    statusText.textContent = `Loaded: ${originalUrl}`;

    // Hide UI
    headerEl.classList.add('hidden-ui');
    statusBar.classList.add('hidden-status');
    contentBox.classList.add('fullscreen');
}

function loadSite(){
    let url = urlInput.value.trim();
    if(!url) return showError('Please enter a URL');
    if(!url.startsWith('http://') && !url.startsWith('https://')) url = 'https://' + url;
    try { new URL(url); } catch(e) { return showError('Invalid URL format'); }

    info.style.display = 'none';
    error.style.display = 'none';
    loading.style.display = 'block';
    frame.style.display = 'none';
    goBtn.disabled = true;
    statusIndicator.textContent = 'Loading';
    statusText.textContent = 'Loading...';

    const proxyType = proxySelect.value;
    if(proxyType === 'direct'){
        frame.src = url;
        frame.onload = () => finishLoad(url);
        frame.onerror = () => showError('Site blocks direct loading. Try a proxy option.');
        return;
    }

    const proxyUrl = getProxyUrl(url, proxyType);

    fetch(proxyUrl)
        .then(res => { if(!res.ok) throw new Error(`HTTP ${res.status}`); return res.text(); })
        .then(html => {
            html = html.replace(/<head(\s|>)/i, `<head$1<base href="${url}">`);
            const blob = new Blob([html], { type: 'text/html' });
            const blobUrl = URL.createObjectURL(blob);
            frame.src = blobUrl;
            frame.onload = () => finishLoad(proxySelect.options[proxySelect.selectedIndex].text + ' ‚Äî ' + url);
        })
        .catch(err => { console.error('Proxy error:', err); showError(`Failed to load: ${err.message}. Try switching proxy options.`); });
}

goBtn.addEventListener('click', loadSite);
urlInput.addEventListener('keypress', e => { if(e.key === 'Enter') loadSite(); });

// Show header when hovering top or over header, hide after leaving
let hoverTimeout;
document.addEventListener('mousemove', e => {
    if(contentBox.classList.contains('fullscreen')) {
        const overHeader = e.clientY <= headerEl.offsetHeight;
        if(overHeader){
            if(hoverTimeout) clearTimeout(hoverTimeout);
            headerEl.classList.remove('hidden-ui');
            statusBar.classList.remove('hidden-status');
        } else {
            if(hoverTimeout) clearTimeout(hoverTimeout);
            hoverTimeout = setTimeout(() => {
                headerEl.classList.add('hidden-ui');
                statusBar.classList.add('hidden-status');
            }, 500); // delay so it doesn't flicker
        }
    }
});

</script>
</body>
</html>
